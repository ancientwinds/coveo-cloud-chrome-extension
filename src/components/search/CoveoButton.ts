declare let chrome: any;
declare let $: any;

import { BasicComponent } from '../../components/BasicComponent';
import { ComponentStore } from '../../components/ComponentStore';

export class CoveoButton extends BasicComponent {
    private _resultListPanelId: string = null;

    constructor() {
        super('CoveoButton');
    }

    public render(parent: string, resultListPanelId): void {
        this._resultListPanelId = resultListPanelId;

        super.render(parent, `
            <div id="${this._guid}">
                <img width="50px" src="data:image/svg+xml;base64,PHN2ZyBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxMDAgOTkuOTk5IiB2aWV3Qm94PSIwIDAgMTAwIDk5Ljk5OSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjMTM0YjhkIj48cGF0aCBkPSJtMTQuMTcxIDg2LjY2NmMtMS4xNDItMS40MS0yLjg2Mi0yLjIyNi00LjY3Ni0yLjIxOS0zLjA4IDAtNS40MTYgMi43MDgtNS40MTYgNS43MjMgMCAzLjM4NyAyLjM0IDUuNzg3IDUuNjYyIDUuNzg3IDEuNzg2IDAgMy4yNjItLjg2MSA0LjQ5NC0yLjE1NHY0LjAwNWMtMS4zOS43MzYtMi45NCAxLjExNy00LjUxMyAxLjEwNy00LjgwMS4wMDEtOC43MjItMy42OTMtOC43MjItOC42MTYgMC01LjA1MiAzLjk0LTguODA2IDguOTI4LTguODA2IDEuNTA4LS4wMTIgMi45OTQuMzcxIDQuMzA4IDEuMTExeiIvPjxwYXRoIGQ9Im0yMi43OTIgOTAuMjM1Yy4wMzQgMy4wOTMgMi41NjggNS41NzQgNS42NjIgNS41NDEgMy4wOTMtLjAzNCA1LjU3NC0yLjU2OCA1LjU0MS01LjY2Mi0uMDMzLTMuMDctMi41MzEtNS41NDEtNS42MDEtNS41NDEtMy4xMS4wMTgtNS42MTcgMi41NTItNS42MDIgNS42NjJtMTQuMjgzIDBjIC4wNjQgNC43MzEtMy43MiA4LjYxOC04LjQ1MSA4LjY4Mi0uMDkuMDAxLS4xODEuMDAxLS4yNzEtLjAwMS00Ljc5My4xLTguNzYtMy43MDQtOC44NjEtOC40OTgtLjEtNC43OTMgMy43MDQtOC43NiA4LjQ5OC04Ljg2MS4xMjEtLjAwMy4yNDItLjAwMy4zNjMgMCA0LjczMS0uMDg2IDguNjM2IDMuNjc5IDguNzIyIDguNDEuMDAyLjA5LjAwMi4xODEuMDAxLjI3MSIvPjxwYXRoIGQ9Im00OS4wMTQgOTIuMjY3IDQuNzQtMTAuMjIxaDMuNTA4bC04LjI0OCAxNi45My04LjE4NS0xNi45M2gzLjUwOHoiLz48cGF0aCBkPSJtNzMuNjM5IDg4LjM4OGMtLjM3OS0yLjQ2MS0xLjk2OC00LjA2Mi00LjQ5NC00LjA2Mi0yLjQ2MSAwLTQuMjQ4IDEuNzI2LTQuNjggNC4wNjJ6bS05LjMwNCAyLjM0YzAgMi43NjkgMS44OTYgNS40MTYgNC45MyA1LjQxNiAyLjQwMSAwIDMuNjk0LTEuMjMzIDQuODYyLTMuMjAxbDIuNjU1IDEuNDc5Yy0xLjQ5IDIuNzk3LTQuNDE2IDQuNTMxLTcuNTg1IDQuNDk0LTQuOTg3IDAtOC4wMDItMy43NTUtOC4wMDItOC42MTcgMC01LjA0OCAyLjcwOC04LjgwMiA3Ljk0Mi04LjgwMnM3LjYzOCAzLjgxNSA3LjYzOCA4LjY3N3YuNTU0eiIvPjxwYXRoIGQ9Im04NC42NTYgOTAuMjM1Yy4wMzQgMy4wOTMgMi41NjggNS41NzQgNS42NjIgNS41NDEgMy4wOTMtLjAzNCA1LjU3NC0yLjU2OCA1LjU0MS01LjY2Mi0uMDMzLTMuMDctMi41MzEtNS41NDEtNS42MDEtNS41NDEtMy4xMS4wMTgtNS42MTcgMi41NTItNS42MDIgNS42NjJtMTQuMzQzIDBjIC4wMjMgNC44MTctMy44NjQgOC43NDEtOC42ODEgOC43NjRzLTguNzQxLTMuODY0LTguNzY0LTguNjgxIDMuODY0LTguNzQxIDguNjgxLTguNzY0aC4wNDJjNC43MzEtLjA4NiA4LjYzNiAzLjY3OSA4LjcyMiA4LjQxLjAwMS4wOS4wMDEuMTggMCAuMjcxIi8+PC9nPjxwYXRoIGQ9Im03NS43MjggNzEuNjEzLTEzLjUzOS03Ljc4NnYxNS41NzJ6IiBmaWxsPSIjZjQ4MDIwIi8+PHBhdGggZD0ibTUzLjI2MiA1NC44NzMtLjY0Ny0zLjAxNCAyNy43MjQtMTYuMDA2LTYwLjM2Ny0zNC44NTN2NjkuNzA1bDcuMzYzLTQuMjUxIDIuMjE4IDIuMTA4eiIgZmlsbD0iI2Y1ODAyMCIvPjxwYXRoIGQ9Im0zNC42NDIgNTguNzExaC0xMC43ODVjLS41MjQgMC0uOTUuNDI3LS45NS45NTFzLjQyNi45NTEuOTUuOTUxaDEwLjc4NWMuNTI0IDAgLjk1MS0uNDI2Ljk1MS0uOTUxLS4wMDEtLjUyNC0uNDI3LS45NTEtLjk1MS0uOTUxeiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0zNC42NDIgNTQuMzM0aC0xMS4yODFjLS41MjQgMC0uOTUxLjQyNi0uOTUxLjk1cy40MjYuOTUxLjk1MS45NTFoMTEuMjgxYy41MjQgMCAuOTUxLS40MjYuOTUxLS45NTEtLjAwMS0uNTIzLS40MjctLjk1LS45NTEtLjk1eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0yMy45NTggNTEuODU5aDEwLjY4NGMuNTI0IDAgLjk1MS0uNDI2Ljk1MS0uOTVzLS40MjYtLjk1MS0uOTUxLS45NTFoLTEwLjY4NGMtLjUyNCAwLS45NTEuNDI2LS45NTEuOTUxLjAwMS41MjMuNDI3Ljk1Ljk1MS45NXoiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJtNDUuMTMxIDQxLjAzdi0xNi4zMTNoLjg1NGMuODM2IDAgMS41MTYtLjY4IDEuNTE2LTEuNTE2cy0uNjgtMS41MTYtMS41MTYtMS41MTZoLTE2LjI0OWMtLjgzNiAwLTEuNTE2LjY4LTEuNTE2IDEuNTE2cy42OCAxLjUxNiAxLjUxNiAxLjUxNmguODU0djE2LjMxM2MtNS45MDcgMy4wMTktOS4zNzQgOS40MzUtOC42NDcgMTYuMDYxLjgwNyA3LjM2IDYuNzMyIDEzLjI5NCAxNC4wODggMTQuMTEuNjA5LjA2NyAxLjIyNS4xMDIgMS44My4xMDIgOC44MzIgMCAxNi4wMTctNy4xODUgMTYuMDE3LTE2LjAxNyAwLTYuMDY0LTMuMzQ0LTExLjUtOC43NDctMTQuMjU2em0tMS4yOTcgMS45OTRjNC43MzcgMi4zMTMgNy42OCA3LjAxMSA3LjY4IDEyLjI2MSAwIDcuNTI4LTYuMTI1IDEzLjY1My0xMy42NTMgMTMuNjUzLS41MTkgMC0xLjA0Ny0uMDI5LTEuNTY5LS4wODctNi4yNjUtLjY5NS0xMS4zMTItNS43NDktMTEuOTk5LTEyLjAxOC0uNjM5LTUuODI0IDIuMzQyLTExLjI0NCA3LjU5NC0xMy44MDlsMS4wNjctLjUyMXYtMTguNDU1aDkuODEzdjE4LjQ1NXoiIGZpbGw9IiNlNmVjZjAiLz48cGF0aCBkPSJtNDMuODM0IDQzLjAyNC0xLjA2Ny0uNTIxdi0xOC40NTVoLTkuODA4LS4wMDV2MTguNDU1bC0xLjA2Ny41MjFjLTMuMDcgMS40OTktNS4zNjMgMy45NzMtNi42MTIgNi45MzRoOS4zNjdjLjUyNCAwIC45NTEuNDI2Ljk1MS45NTEgMCAuNTI0LS40MjYuOTUtLjk1MS45NWgtMTAuMDA3Yy0uMjA1LjgwMy0uMzM5IDEuNjMxLS4zOTYgMi40NzZoMTAuNDAzYy41MjQgMCAuOTUxLjQyNi45NTEuOTVzLS40MjYuOTUxLS45NTEuOTUxaC0xMC40MDJjLjAxMy4xOTkuMDMxLjM5OC4wNTMuNTk3LjA3LjY0LjE4NiAxLjI2Ny4zNDMgMS44NzhoMTAuMDA2Yy41MjQgMCAuOTUxLjQyNy45NTEuOTUxcy0uNDI2Ljk1MS0uOTUxLjk1MWgtOS4zNmMxLjI0MSAyLjkxOCAzLjQ4MSA1LjMyOSA2LjI3NyA2Ljc5MWwxOS45NDEtMTEuNTE0Yy4wMDktLjIwMS4wMTMtLjQwMy4wMTMtLjYwNS4wMDEtNS4yNDktMi45NDItOS45NDgtNy42NzktMTIuMjYxeiIgZmlsbD0iI2ZmZiIgb3BhY2l0eT0iLjQiLz48L3N2Zz4=" />
                <div id="coveo-button-result-caption">?</div>
            </div>
        `);

        let context: CoveoButton = this;
        document.getElementById(this._guid).addEventListener('click', function () {
            $(`#${context._resultListPanelId}`).toggle();
        });

        // TODO: Binder les actions
    }
}
